!function(){"use strict";window.scala=window.scala||{},scala.InfoBox=function(t){google.maps.OverlayView.call(this),this.template=t.template,this.offsetVertical_=0,this.offsetHorizontal_=0},scala.InfoBox.setPrototype=function(){scala.InfoBox.prototype=new google.maps.OverlayView,scala.InfoBox.prototype.setContent=function(t){this.content=t},scala.InfoBox.prototype.open=function(t,e){this.latlng_=e.getPosition(),this.map_=t,this.setMap(this.map_);var o=this;this.boundsChangedListener_=google.maps.event.addListener(this.map_,"bounds_changed",function(){return o.panMap.apply(o)})},scala.InfoBox.prototype.remove=function(){this.removeDiv(),this.div_=null},scala.InfoBox.prototype.draw=function(){if(this.createElement(),this.div_){var t=this.getProjection().fromLatLngToDivPixel(this.latlng_);t&&(this.div_.style.left=t.x+this.offsetHorizontal_+"px",this.div_.style.top=t.y+this.offsetVertical_+"px",this.div_.style.display="block")}},scala.InfoBox.prototype.createElement=function(){var t=this.getPanes(),e=this.div_;if(e)e.parentNode!=t.floatPane&&(this.removeDiv(),t.floatPane.appendChild(e));else{e=this.div_=document.createElement("div"),e.appendChild(this.template.content.cloneNode(!0)),e.classList.add("info-window"),e.style.position="absolute";var o=e.querySelector(".info-window__content");o.innerHTML=this.content;t.floatPane.appendChild(e),this.panMap()}},scala.InfoBox.prototype.removeDiv=function(){this.div_&&this.div_.parentNode&&this.div_.parentNode.removeChild(this.div_)},scala.InfoBox.prototype.close=function(){this.removeDiv()},scala.InfoBox.prototype.panMap=function(){var t=this.map_,e=t.getBounds();if(e){var o=this.latlng_,n=this.div_.offsetWidth,i=this.div_.offsetHeight,a=-n/2,s=-i,l=10,h=10,p=t.getDiv(),r=p.offsetWidth,f=p.offsetHeight,d=e.toSpan(),c=d.lng(),g=d.lat(),v=c/r,_=g/f,u=e.getSouthWest().lng(),m=e.getNorthEast().lng(),y=e.getNorthEast().lat(),x=e.getSouthWest().lat(),w=o.lng()+(a-l)*v,B=o.lng()+(a+n+l)*v,I=o.lat()-(s-h)*_,L=o.lat()-(s+i+h)*_,C=(u>w?u-w:0)+(B>m?m-B:0),P=(I>y?y-I:0)+(x>L?x-L:0),b=t.getCenter(),D=b.lng()-C,N=b.lat()-P;t.panTo(new google.maps.LatLng(N,D)),google.maps.event.removeListener(this.boundsChangedListener_),this.boundsChangedListener_=null}}}}();